---
title: 进入容器开发
weight: 2
---

## 启动容器

​	简单的示例：`docker run -ti --rm --net=host --name=test image:tag`

​	示例常见参数：

| 参数名       | 功能                                                         |
| ------------ | ------------------------------------------------------------ |
| `-ti`        | t和i两个参数通常一起使用，交互式启动容器                     |
| `--rm`       | 停止容器后自动删除，常见于开发时，避免旧容器堆积             |
| `--net=host` | 与-p重叠，使用宿主机网卡，映射全部端口                       |
| `-p`         | -p port:port，映射容器内端口到宿主机端口，可以批量指定       |
| `--name`     | 为容器设置名称，默认会使用一个hash值作为容器名               |
| `-v`         | 挂载外部目录到容器内，会覆盖容器内已存在的目录。好处是可以外部修改或即时备份，可以利用挂载实现一些动态效果 |

还有很多有用参数可见[Docker官方文档](https://docs.docker.com/engine/reference/commandline/run/)

## 挂载目录

大多数时候我们还是希望即时的修改工程代码

*条件允许的话我猜你不会喜欢在容器里用终端写代码的*

所以我们可以把工程挂载到容器里

~~~shell
docker run -ti -v /path/to/project/folder:/path/to/folder image:tag
~~~

例如这样我们把宿主机上的`/path/to/project/folder`目录挂载到了容器里的`/path/to/folder`目录，相当于映射关系。

## 限制资源或传递默认环境变量

有时候我们并不希望这个容器拿走机器上全部的资源，*尤其是做性能测试的时候*

~~~shell
docker run -ti --cpus=16 image:tag
~~~

- 使用`--cpus=16`限制容器只能最多用到`1600%`的CPU核心资源，这并不意味着一定是16个核心，也可能是32核心每个用一半

- 使用`--cpu-shares`选项可以设置 CPU 共享权重，权重的默认值是1024，每个启动的容器在他们需要的时候，都会按权重抢占可用的CPU资源

- 使用`--cpu-period`和`--cpu-quota`选项可以限制容器的 CPU 使用时间。

  例如`--cpu-period=100000 --cpu-quota=25000`表示在每 100ms 的时间周期内，容器最多只能使用 25ms 的 CPU 时间。

- 使用`-m`或`--memory`选项可以指定容器的最大内存使用量。

  例如`-m 512m`或是`-m 1G`

~~~shell
docker run -ti -e MY_ENV=my_env image:tag
~~~

使用参数`-e`就可以为容器传递一个默认的环境变量，当然，进入容器后仍然可以改变他们
